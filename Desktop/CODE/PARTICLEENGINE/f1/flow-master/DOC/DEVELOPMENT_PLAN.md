# F1 Particle Flow â€“ Development Plan & TODO Backlog

_This document is the single source of truth for ongoing work.  Update it regularly after each pull-request._

---

## Legend
- âœ… **Done** â€“ merged to `main`
- ğŸ”„ **In Progress** â€“ PR open or assigned
- ğŸ”² **Todo** â€“ not started
- â³ **Deferred** â€“ postponed until prerequisite done

---

## 1. Foundational Tasks
| ID | Task | Owner | Status | Target Date |
|----|------|-------|--------|-------------|
| FT-01 | Remove legacy duplicate files (e.g. `UnifiedMaterialSystem.2.js`) | @core | ğŸ”² | W1 |
| FT-02 | Add ESLint + Prettier + EditorConfig | @core | ğŸ”² | W1 |
| FT-03 | Set-up GitHub Actions CI (install, lint, test, build) | @devops | ğŸ”² | W2 |
| FT-04 | Begin TypeScript migration â€“ convert `utils/` helpers | @core | ğŸ”„ | W3 |
| FT-05 | Document public APIs with JSDoc/TSdoc | @docs | â³ | W4 |

## 2. Simulation & Physics
| ID | Task | Owner | Status | Remarks |
|----|------|-------|--------|---------|
| SIM-01 | Add `materialId` field to `particle` struct | @sim | ğŸ”² |  |
| SIM-02 | Update grid cell struct to accumulate material momentum | @sim | ğŸ”² |  |
| SIM-03 | Modify P2G & G2P kernels for multi-material | @sim | â³ | blocked by SIM-01 |
| SIM-04 | Implement surface tension force term | @sim | â³ | need stable kernels first |
| SIM-05 | Add vorticity confinement | @sim | â³ |  |
| SIM-06 | Adaptive sparse grid lookup | @sim | â³ | research phase |

## 3. Rendering & Visual
| ID | Task | Owner | Status | Notes |
|----|------|-------|--------|-------|
| RND-01 | Screen-space fluid surface extraction pass | @render | ğŸ”² |  |
| RND-02 | Integrate OutputPass + HDR tone mapping | @render | ğŸ”² |  |
| RND-03 | Implement impostor billboard LOD for far particles | @render | â³ | research billboards |
| RND-04 | Volumetric fog / caustics post effect | @render | â³ | dependent on RND-01 |

## 4. UI / UX
| ID | Task | Owner | Status | Details |
|----|------|-------|--------|---------|
| UI-01 | Preset Manager (load/save JSON) | @ui | ğŸ”² |  |
| UI-02 | Search/filter in Tweakpane | @ui | ğŸ”² |  |
| UI-03 | Parameter grouping + collapsible presets | @ui | ğŸ”² |  |
| UI-04 | 3-D gizmo interactions (attractor, vortex) | @ui | â³ | depends on RND-03 |

## 5. Tooling & QA
| ID | Task | Owner | Status | |
|----|------|-------|--------|-|
| QA-01 | Start unit-test harness (Vitest) for math/util functions | @qa | ğŸ”² | |
| QA-02 | Visual regression test using Playwright | @qa | â³ | requires screenshot harness |
| QA-03 | Bundle size regression budget in CI | @devops | â³ | after CI setup |

## 6. Stretch Goals
- WebXR support (Immersive VR mode)
- AR fluid overlay using WebARonARCore/iOS (<2026)
- Export simulation as GLTF sequences

---

## Release Milestones
| Version | Scope | ETA |
|---------|-------|-----|
| **v0.3.0** | Code clean-up, CI, TypeScript scaffold | +4 weeks |
| **v0.4.0** | Adaptive grid prototype, surface tension | +8 weeks |
| **v0.5.0** | Screen-space fluid renderer, PostFX pipeline | +12 weeks |
| **v1.0.0** | Multi-material support, UX polish, docs | Q1 2026 |

---

## Changelog (autogenerated by release script)
Use `npm run release` to bump version & update this table. 